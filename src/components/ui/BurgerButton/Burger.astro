---
import ModalPopUp from "@/components/ui/ModalPopUp/ModalPopUp.astro";

interface Props {
  class?: string;
  id?: string;
  dataPosition?: string;
  type?: string;
}

const {
  class: className,
  id = "burger-btn",
  dataPosition = "right",
  type = "normal",
} = Astro.props;

const menuId = `${id}-menu`;
---

<svg
  id={id}
  class:list={[
    "burger-icon relative size-7 cursor-pointer select-none sm:size-8",
    className,
  ]}
  data-position={dataPosition}
  viewBox="0 0 24 24"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
  fill="none"
>
  {
    type === "normal" ? (
      <>
        <path class="line top" d="M4 6h16" />
        <path class="line middle" d="M4 12h16" />
        <path class="line bottom" d="M4 18h16" />
      </>
    ) : (
      <>
        <path class="line" d="m5 8 6 6" />
        <path class="line top" d="m4 14 6-6 2-3" />
        <path class="line bottom" d="M2 5h12" />
        <path class="line middle" d="M7 2h1" />
        <path class="line bottom" d="m22 22-5-10-5 10" />
        <path class="line top" d="M14 18h6" />
      </>
    )
  }
</svg>

<ModalPopUp id={menuId} triggerId={id}>
  <slot />
</ModalPopUp>

<style>
  .burger-icon .line {
    transform-origin: center;
    transition:
      transform 0.35s cubic-bezier(0.175, 0.885, 0.32, 1.45),
      opacity 0.2s ease;
  }

  /* Estas animaciones SOLO funcionan si el SVG es Inline (type="normal") */
  .burger-icon:global(.is-open) .top {
    transform: translateY(6px) rotate(45deg);
  }

  .burger-icon:global(.is-open) .middle {
    opacity: 0;
    transform: scaleX(0);
  }

  .burger-icon:global(.is-open) .bottom {
    transform: translateY(-6px) rotate(-45deg);
  }

  .burger-icon:global(.is-open) {
    color: var(--color-accent, #3b82f6);
    stroke-width: 3.6;
  }
</style>
